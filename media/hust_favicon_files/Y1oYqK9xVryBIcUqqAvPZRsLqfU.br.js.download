(function(){function o(n){var i=t(n,!0,!0),r,u;if(i==null||!a(i.colSp,i.items[0])){i.call!=null&&i.call(!1,{IsSuccess:!1});return}r=i.items[0];u=v(i.colSp,r);FavRequest.setRequestType(r.type!=1);FavRequest.addItem(u,function(n){i.call(n)})}function s(n){var i=t(n,!1,!0),r,u;if(i==null||!w(i.items[0])){i.call!=null&&i.call(!1,{IsSuccess:!1});return}r=i.items[0];u=b(i.colSp,r);FavRequest.setRequestType(r.type!=1);FavRequest.deleteItems(u,function(n){i.call(n)})}function h(n){var i=t(n,!1,!0),r;i!=null&&(r=g(i.items),FavRequest.setRequestType(i.items[0].type!=1),FavRequest.getStatus(r,function(n){i.call(n)}))}function c(n){var i=t(n,!0,!1);i!=null&&(FavRequest.setRequestType(!0),FavRequest.deleteCollection(i.colSp,function(n){i.call(n)}))}function t(n,t,i){var u,r,f;return!n||n.length<3?null:(u=n[1],t&&u==null)?null:(r=n[2],i&&(r==null||r.length==0))?null:(f=n[3],f==null)?null:{colSp:u,items:r,call:f}}function a(n,t){var i=!0;return t.purl&&t.murl&&(n.id||n.title||n.collectionType)||(i=!1),i}function v(n,t){switch(t.type){case 0:return y(n,t);case 1:return p(n,t)}}function y(n,t){var i={type:0,cid:t.cid,description:t.desc,query:n.title||t.query,md5:t.md5?"md5_"+t.md5:null,format:t.type||t.format,mH:t.mh,mW:t.mw,murl:t.murl,mid:t.mid,purl:t.purl,thH:t.thH,thW:t.thW,tid:t.tid,intent:t.intent};return{Specifier:n,Images:[i]}}function p(n,t){var i={type:1,query:n.title||t.query,murl:t.murl,mid:t.mid,purl:t.purl};return{Specifier:n,Videos:[i]}}function w(n){var t=n;switch(n.type){case 0:return t.md5||t.purl&&t.murl;case 1:return t.mid||t.purl&&t.murl}}function b(n,t){switch(t.type){case 0:return k(n,t);case 1:return d(n,t)}}function k(n,t){return[{specifier:{id:n?n.id||"":null,type:n?n.collectionType||"":null},images:[{purl:t.purl,murl:t.murl,md5:t.md5?"md5_"+t.md5:null,cid:t.cid,intent:t.intent}]}]}function d(n,t){return[{specifier:{id:n?n.id||"":null,type:n?n.collectionType||"":null},videos:[{purl:t.purl,murl:t.murl,mid:t.mid}]}]}function g(n){var t=n[0];return t.type==1?{Videos:n}:{Images:n}}function l(){n.unbind(r,o);n.unbind(u,s);n.unbind(f,h);n.unbind(e,c);n.unbind(i,l)}var i="ajax.unload",r="AddToFaves",u="RemoveFromFaves",f="GetStatus",e="RemoveCollection",n=sj_evt;return n.bind(r,o),n.bind(u,s),n.bind(f,h),n.bind(e,c),n.bind(i,l),setTimeout(function(){sj_evt.fire("FavCoreLoaded")},1),!0})()