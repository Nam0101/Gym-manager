var redDotControl="redDotControl",giveMuidHomepageHeaderIconId="rh_meter_leaf_homepage",giveMuidSerpHeaderIconId="rh_meter_leaf",giveMuidHomepageHeaderIconIdV2="givemuid_heart_homepage",giveMuidSerpHeaderIconIdV2="givemuid_heart",giveMuidPartnerId="GiveMuid",giveSerpPartnerId="GiveSerp",autoOpenFlyoutInstEventName="AutoOpenFlyoutSuppression",bepFlyoutMissingOrNotHiddenSuppressionReason="BepFlyoutMissingOrNotHidden",invalidPageWidthSuppressionReason="InvalidPageWidth",suppressionReason="",bepns=bepns||function(n,t){function yt(){var h=this,e;sj_be(_w,"message",ri,!1);u=n("id_rh");u!=null&&u.addEventListener("keydown",function(n){n.key=="Escape"&&document.activeElement.blur()});r=n("bepfo");r||(e=n("id_rwl"),e&&(r=t("div"),r.id="bepfo",r.className=o,e.parentNode&&e.parentNode.insertBefore(r,e.nextSibling)));wt();sj_evt.bind("AutoOpenFlyout",function(){b=!0;a||!a&&ii()>=1200?s(r,o)?k(h.evt,!0):suppressionReason=bepFlyoutMissingOrNotHiddenSuppressionReason:suppressionReason=invalidPageWidthSuppressionReason;suppressionReason&&LightLogger.logInstrumentationV2(null,LightLogger.InstrumentationEventType.Init,autoOpenFlyoutInstEventName,!0,{SuppressionReason:suppressionReason})},!0);sj_evt.bind("AutoOpenFlyoutHide",function(){i&&f()},!0);sj_evt.bind("CustomThemeFlyout",function(){if(rt=!0,i){var n=d();i.src=n.src}});sj_be(u,c,ut,!1);sj_evt.bind(tt,ft,!1);sj_evt.bind(nt,gt);sj_evt.bind("onP1",pt,1);sj_evt.bind("id:refreshed",bt,1)}function pt(){var n=0,t=setInterval(function(){u&&u.offsetWidth>0&&u.offsetHeight>0?(clearInterval(t),sj_evt.fire("bepready",et)):n==80&&clearInterval(t);n++},400)}function wt(){dt(u,vt)}function bt(){kt(_ge("idd_rwds"),_ge("idd_rwdstrial"))}function kt(n,t){n&&t&&(t.href=n.href,n.h?t.h=n.h:n.getAttribute&&n.getAttribute("h")&&t.setAttribute("h",n.getAttribute("h")))}function dt(n,t){n&&(n.href=t)}function gt(n){n[1]!==g&&f()}function s(n,t){if(n&&n.className){var i=" "+n.className+" ";return i.indexOf(" "+t+" ")!==-1}return!1}function h(n,t){n&&!s(n,t)&&(n.className+=" "+t)}function v(n,t){if(s(n,t)){var i=new RegExp("(\\s|^)"+t+"(\\s|$)","g");n.className=n.className.replace(i," ")}}function ut(n){r&&(s(r,o)?k(n):f(n))}function ft(n){r&&(!r||s(r,o)?k(n):f(n),sj_evt.unbind(tt,ft))}function ni(){u&&sj_ue(u,c,ut,!1)}function et(n){a&&(n&&n>0?ti():ot())}function ti(){h(u,"rigleamon")}function ot(){v(u,"rigleamon")}function k(n,t){t===void 0&&(t=!1);sj_evt.fire("focusChange","bep");r&&(v(r,"popup"),r.firstChild?b?(r.removeChild(i),st(t),b=!1):at(!0):st(t),v(r,o),u.setAttribute("aria-expanded","true"));h(u,"openfo");sj_sp(n);sj_evt.fire(nt,g);t||(sj_be(_d,c,f,!0),sj_be(_d,l,y,!0))}function d(n){var l,i,a,t,v,o;n===void 0&&(n=!1);var r=_w.location.search.substr(1),c=/(^|&)rewardstesthooks=1(&|$)/i.exec(r),u=/(?:^|&)rewardsbag=([^&]*)(?:&|$)/i.exec(r),f=undefined;try{l=/(^|&)uncrunched=1(&|$)/i;f=l.exec(r)}catch(b){f=undefined}i=undefined;try{a=/(^|&)isDarkMode=1(&|$)/i;i=a.exec(r)}catch(k){i=undefined}t=undefined;try{v=/(?:^|&)partnerId=([^&]*)(?:&|$)/i;t=v.exec(r)}catch(d){t=undefined}var s=new Date,y=s.getDate(),p=s.getMonth()+1,w=(p<10?"0":"")+p+"/"+(y<10?"0":"")+y+"/"+s.getFullYear(),e="/rewardsapp/flyout"+(n?"?channel=2":"?channel=0"),h;return!t&&_ge?(o="",_ge(giveMuidHomepageHeaderIconId)||_ge(giveMuidSerpHeaderIconId)||_ge(giveMuidHomepageHeaderIconIdV2)?o=giveMuidPartnerId:(_ge("gwb_teal_heart")||_ge("gwb_header_wrapper"))&&(o=giveSerpPartnerId),h=(n?e+"&partnerId=AutoOpenFlyout":rt?e+"&partnerId=WholePage":e+"&partnerId="+o)+("&date="+w+(c&&u?"&atlahostname=localhost&bag="+u[1]:"")+(f?"&uncrunched=1":"")+(i?"&isDarkMode=1":""))):h=e+(t&&t[1]?"&partnerId="+t[1]:"")+"&date="+w+(c&&u?"&atlahostname=localhost&bag="+u[1]:"")+(f?"&uncrunched=1":"")+(i?"&isDarkMode=1":""),{src:h,isDarkMode:i}}function st(u){var f,o;u===void 0&&(u=!1);f=n("id_rwl");i=t("iframe");i.id="bepfm";i.title=f===null||f===void 0?void 0:f.getAttribute("data-title");i.frameBorder="no";i.scrolling="no";i.height=0;r.appendChild(i);u?(r.style.visibility="hidden",r.style.height="100%",sj_be(i,it,function(){r.style.visibility="visible";lt(u);h(r,"popup")},!1)):(sj_be(i,it,function(){lt(u)},!1),ht(i),e=t("div"),e.id="bepfl",e.innerText=e.textContent="Loading...",r.appendChild(e),r.style.width=w+"px",ct(e));o=d(u);i.src=o.src;o.isDarkMode&&h(r,"darkMode")}function f(n){s(r,o)||h(r,o);v(u,"openfo");a&&ot();u.setAttribute("aria-expanded","false");sj_ue(_d,c,f,!0);sj_ue(_d,l,y,!0);i&&i.contentWindow&&sj_ue(i.contentWindow.document,l,y,!0);n&&sj_sp(n);n&&sj_pd(n);at(!1)}function ht(n){n&&(n.style.display="none")}function ct(n){n&&(n.style.display="block")}function lt(n){n||(ht(e),ct(i));i.height=Math.min(i.contentWindow.document.body.scrollHeight,p);r.style.height=i.height+"px";i&&i.contentWindow&&sj_be(i.contentWindow.document,l,y,!0)}function at(n){i&&i.contentWindow.postMessage({action:"visibility",isVisible:n},"*")}function ii(){return Math.max(_d.body.scrollWidth,_d.documentElement.scrollWidth,_d.body.offsetWidth,_d.documentElement.offsetWidth,_d.documentElement.clientWidth)}function ri(n){var u,e,t,o,s;if(i&&i.contentWindow&&n.origin===window.origin&&n.source===i.contentWindow&&n.data)switch(n.data.action){case"resize":u=n.data.bodyHeight&&parseFloat(n.data.bodyHeight);e=n.data.bodyWidth&&parseFloat(n.data.bodyWidth);u&&!isNaN(u)?(i.height=Math.min(u,p),r.style.height=i.height+"px"):(i.height=Math.min(i.contentWindow.document.body.scrollHeight,p),r.style.height=i.height+"px");e&&!isNaN(e)?(t=Math.min(e,w)+"px",i.style.width=t,r.style.width=t):(t=w+"px",i.style.width=t,r.style.width=t);break;case"updatePoints":RewardsCreditRefresh&&(o=RewardsCreditRefresh.GetRewardsHeaderBalance(),o!=n.data.newBal&&(RewardsCreditRefresh.SetRewardsHeaderBalance(n.data.newBal),RewardsCreditRefresh.RewardsHeaderAnim(o,n.data.newBal,n.data.goal,n.data.incr)));break;case"redDotControl":sj_evt.fire(redDotControl,!0);break;case"refresh":i&&(s=d(),i.src=s.src);break;case"close":i&&f()}}var g="bepfo",p=700,w=320,nt="onPopTR",tt="openbep",u,r,e,i,c="click",l="keyup",it="load",o="b_hide",vt="javascript:void(0)",b=!1,rt=!1,a=typeof _H!="undefined",y=function(n){var e=n.which||n.keyCode,r=sj_et(n),t;if(e==27){f(n);u.focus();return}if(e==9&&r&&i){if(t=r.nodeName,t=="BODY"||t=="HTML"||t=="#document")return;i.contentWindow.document.body.contains(r)||f(n)}};return yt(),{sg:et,ubc:ni}}(_ge,sj_ce)