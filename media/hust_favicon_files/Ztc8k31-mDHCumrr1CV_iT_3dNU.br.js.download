var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},ColPickerBeh,FavRequest;(function(n){n[n.All=0]="All";n[n.Data=1]="Data"})(ColPickerBeh||(ColPickerBeh={})),function(n){function e(n){return"image:cid="+n.cid}function o(n){return"product:cid="+n.cid}function s(n){return"video:mid="+n.mid}function h(n){return"webdoc:url="+(n.url||n.purl)}function c(n){return n.id}function l(n){return"recipe:sid="+(n.sid||n.entityId)}function r(n){var t=n.collectionType,i=n.id,r=n.title;return t?{PredefinedCollection:Constants.PredefinedCollections[t]}:i?{collectionId:i}:{collectionTitle:r}}function a(n,t){return __assign(__assign({},n),{type:t,MediaId:n.mid,MediaUrl:n.murl,PageUrl:n.purl})}function v(n){var i,t=[];return n.tid?t.push({ThumbnailId:n.tid,Width:n.tw,Height:n.th}):n.turl?t.push({ExternalThumbnailUrl:n.turl,Width:n.tw,Height:n.th}):n.thmb&&t.push({Thumbnail:n.thmb}),{Id:n.id,ContentId:n.contentId,FriendlyDomainName:n.fdn,Title:n.title,ThumbnailInfo:t,ClickThroughUrl:n.url,ItemTagPath:n.itemtagpath,CustomData:(i=n.customdata)!==null&&i!==void 0?i:null,Note:n.note}}function y(n,t,i,r){return{type:t,collectionItemId:i(n),collection:r}}function p(n,t,i){return{Id:t(n),SourceCollectionId:i.collectionId}}function w(n){n[0]||(n=[n]);var t=n[0],f=u(n,!0),e={CollectionItemType:i,Items:__spreadArray(__spreadArray([],f.Items,!0),f.itemReferences,!0),TargetCollection:r(t.specifier||t.Specifier)};return t.position!==undefined&&t.position!==null&&(e.Position=t.position),e}function b(n){n[0]||(n=[n]);var t=n[0],i=u(n,!0);return{Items:__spreadArray(__spreadArray([],i.Items,!0),i.itemReferences,!0),TargetCollection:r(t.specifier||t.Specifier)}}function k(n){n[0]||(n=[n]);var t=u(n);return{CollectionItemType:i,ItemReferences:t.itemReferences,Items:t.Items}}function u(n,t){for(var b,it,rt,ut,k,ft,gt,d,et,ot,g,st,ni,nt,ht,ti,u=[],ct=[],tt=0,lt=n;tt<lt.length;tt++){var i=lt[tt],at=i.images,vt=i.Images,yt=i.videos,pt=i.Videos,wt=i.entities,bt=i.specifier,kt=i.webresults,dt=i.generics,f=bt&&!t?r(bt):null,w=t?a:y,ii=t?v:p;if(at||vt)for(b=0,it=at||vt;b<it.length;b++)rt=it[b],ut=rt.intent==="Shopping",u.push(w(rt,ut?"product":"image",ut?o:e,f));if(yt||pt)for(k=0,ft=yt||pt;k<ft.length;k++)gt=ft[k],u.push(w(gt,"video",s,f));if(wt)for(d=0,et=wt;d<et.length;d++)ot=et[d],ot.intent==="Recipe"&&u.push(w(ot,"recipe",l,f));if(kt)for(g=0,st=kt;g<st.length;g++)ni=st[g],u.push(w(ni,"webdoc",h,f));if(dt)for(nt=0,ht=dt;nt<ht.length;nt++)ti=ht[nt],ct.push(ii(ti,c,f))}return{itemReferences:u,Items:ct}}function d(n){var t=u(n.sources);return{collectionItemType:i,targetCollection:r(n.destination),itemReferences:t.itemReferences,Items:t.Items}}function g(n){for(var s,f=[],e=u(n.sources),t=0,o=n.targets;t<o.length;t++)s=o[t],f.push(r(s));return{collectionItemType:i,targetCollections:f,itemReferences:e.itemReferences,Items:e.Items}}function nt(n){return{collectionItemType:i,targetCollections:[{collectionId:n.id}]}}function tt(n){var t={collectionTitle:n.title};return n.collectionTagPath&&(t.collectionTagPath=n.collectionTagPath),n.customData&&(t.customData=n.customData),{targetCollection:t}}function it(n){return{targetCollection:{collectionId:n.CollectionId},title:n.NewTitle}}function rt(n){return{targetCollection:{collectionId:n.id}}}function ut(n){return{shareId:n.id}}function ft(n){return n}function et(n){return n}function ot(n){var t=u([n]);return{collectionItemType:i,itemReferences:t.itemReferences,items:t.Items}}function st(n){var f,t={collectionItemType:n.collectionItemType||i},u,e,o;if(((f=n.targetCollections)===null||f===void 0?void 0:f.length)>0)for(t.targetCollections=[],u=0,e=n.targetCollections;u<e.length;u++)o=e[u],t.targetCollections.push(r(o));return n.maxItemsToFetch&&(t.maxItemsToFetch=n.maxItemsToFetch),n.shouldFilterKCT&&(t.shouldFilterKCT=n.shouldFilterKCT),n.shouldFetchMetadata&&(t.shouldFetchMetadata=n.shouldFetchMetadata),t}function ht(n,t,i,r,u,f,e){var s,h,c,l,o;if(f===void 0&&(f=!1),e===void 0&&(e=""),n){n=n+t;s={};_G&&(s.PIG=_G.IG);u&&(s.Comp=u);f&&(s.lock="1");h=pt();h&&(s.sid=h);for(c in s)n=PrismUtils.appendUrlParam(c,s[c],n);l=n.indexOf("?")!=-1?"&":"?";e&&(n=n+l+e);typeof addCommonPersistedParams=="function"&&(n=addCommonPersistedParams(n));typeof MMTestUtils!="undefined"&&(n=MMTestUtils.atb(n,t),n=MMTestUtils.adl(n));i=i===null?"":i;o=sj_gx();o.open("POST",n,!0);o.withCredentials=!0;o.setRequestHeader("Content-type","application/json");ct(o);o.onreadystatechange=function(){var i,n;o.readyState==4&&r&&(o.status==200?(n=JSON.parse(lt(o.response||o.responseText)),"isSuccess"in n&&t!=="items/status?"?r({IsSuccess:n.isSuccess,Message:n.message||n.shareId||null,Status:1,CollectionId:(i=n.collection)===null||i===void 0?void 0:i.id,TargetCollectionOperationStatus:n.targetCollectionOperationStatus}):r(n)):r(null))};o.send(JSON.stringify(i))}}function ct(n){var t;_G&&((t=_G.favConfig)===null||t===void 0?void 0:t.requestHeaders)&&_G.favConfig.requestHeaders.forEach(function(t,i){return n.setRequestHeader(i,t)})}function lt(n){for(var t=n,r,i;(r=t.indexOf("<!--<![CDATA["))>=0;){if(i=t.indexOf("]\]>-->"),i<0)break;t=t.substr(0,r)+t.substr(i+6)}return t}function t(n,t,i){return i===void 0&&(i=f),function(r,u,f,e,o,s){f===void 0&&(f="");e===void 0&&(e=!1);o===void 0&&(o="");ht(i,n,t?t(r):r,u,f,e,o,s)}}function at(){}function vt(){}function yt(){}function pt(){return typeof sj_cook!="undefined"?_G.SID||sj_cook.get("_SS","SID"):undefined}function wt(n){var t,i;if(!n)return null;if(t=n===null||n===void 0?void 0:n.content,!t)return n.collectionItemId;i=n.collectionItemId;switch(t._type){case"GenericItem":i=t.contentId;break;case"ImageObject":i=t.imageId;break;case"VideoObject":i=t.videoId}return i}function bt(n){_G&&(_G.favConfig=n)}function kt(){var n={};return _G.favConfig&&(n.requestHeaders=new Map(JSON.parse(JSON.stringify(Array.from(_G.favConfig.requestHeaders))))),n}var i="all",f="/mysaves/collections/";n.changeTitle=t("rename",it);n.addItem=t("items/add",w);n.updateItems=t("items/update",b);n.deleteItems=t("items/delete",k);n.deleteCollection=t("delete",nt);n.useForRec=at;n.moveItems=t("items/move",d);n.copyItems=t("items/copy",g);n.getStatus=t("items/status",ot);n.reorderItems=t("items/reorder",et);n.getCollectionPicker=vt;n.shareCollection=t("share",rt);n.unshareCollection=t("unshare",ut);n.createCollection=t("create",tt);n.getCollection=t("get",st);n.reportMigrationStatus=t("migrate/status",null);n.reorderCollections=t("reorder",ft);n.setRequestType=yt;n.extractContentId=wt;n.configure=bt;n.getConfiguration=kt}(FavRequest||(FavRequest={}))