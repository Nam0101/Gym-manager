var MySavesAPIUtils;(function(n){function i(n,t){var r,u,f=n.indexOf("."),e;return f>-1?(e=n.split(".",1)[0],e==="0")?[i(n.substring(f+1),t)]:(r={},r[e]=i(n.substring(f+1),t),r):(u={},u[n]=t,u)}function y(){if(typeof sj_cook!="undefined"){var n=sj_cook.get("_SS","SID");return"&sid="+(n||_G.SID)}return""}function p(n,t){var i=n.indexOf("?");return n+(t.length?(i==-1?"?":i==n.length-1?"":"&")+t.substring(+(t[0]=="&")):"")+y()}function w(n){for(var t=n,r,i;t&&(r=t.indexOf("<!--<![CDATA["))>=0;){if(i=t.indexOf("]\]>-->"),i<0)break;t=t.substr(0,r)+t.substr(i+6)}return t}function b(n){try{return JSON.parse(w(n))}catch(t){return null}}function t(n,t,i,r,u){var f=sj_gx();f.onreadystatechange=function(){var n,t,i;try{f.readyState==4&&(n=f.status,t=f.response,n==200&&t?(i=b(t),i&&r&&!r(i)&&u&&u()):u&&(n>=400||n==0)&&u())}catch(e){u&&u()}};f.open("POST",p(h+n,(t||"")+(c?"&PIG="+c:"")),!0);f.setRequestHeader("Content-type","application/json");_G.SID&&f.setRequestHeader("SID",_G.SID);f.withCredentials=!0;f.send(JSON.stringify(i))}function l(n,t,r,u){var f,s,e,o;u===void 0&&(u={});f=u;r&&(f.type=r);for(s in n)e=n[s],o=t[s],o&&o.length&&(f[e]=i(e,o)[e]);return f}function k(i,r,u){var s;t(n.getUrl,i,(s={},s[n.CollectionItemTypeAttr]="all",s[f]=[],s[e]=1e3,s[o]=!0,s),r,u)}function d(i,r,u,s){var h,c;t(n.getUrl,i,(h={},h[f]=[(c={},c[n.CollectionIdAttr]=r,c)],h[e]=1e3,h[o]=!0,h),u,s)}function g(i,u,f,e,o,s,h,c,a){var v;t(n.addUrl,i,(v={},v[n.TargetCollectionAttr]=r(s,o,h),v.Items=[l(e,u,f)],v[n.CollectionItemTypeAttr]=f,v),c,a)}function nt(i,u,f,e,o,s,h){var l,c;t(n.delUrl,i,(l={itemReferences:[(c={},c[n.CollectionAttr]=r(u,f),c[n.CollectionItemIdAttr]=e,c)]},l[n.CollectionItemTypeAttr]=o,l),s,h)}function tt(i,r,u,f,e){var o,s;r&&u&&(s={},s.Id=r,s.SourceCollectionId=u,t(n.delUrl,i,(o={},o[n.CollectionItemTypeAttr]="all",o.items=[s],o.itemReferences=[],o),f,e))}function it(i,r,u,f,e){var o;t(a,i,(o={},o[n.TargetCollectionAttr]={CollectionTitle:r,CollectionTagPath:u},o),f,e)}function r(n,t,i){return n?{PredefinedCollection:n}:t?{CollectionId:t}:{CollectionTitle:i}}function rt(n,i,r,u,f,e){t(v,n,{collections:i,imageInfo:{pageTitle:r,altTitle:u}},f,e)}var u="Id",s,h;n.TargetCollectionAttr="targetCollection";var f="targetCollections",e="maxItemsToFetch",o="shouldFetchMetadata";n.CollectionAttr="collection";n.CollectionIdAttr=n.CollectionAttr+u;n.CollectionItemIdAttr=n.CollectionAttr+"Item"+u;n.CollectionItemTypeAttr="CollectionItemType";n.GenericString="generic";s=typeof _G!="undefined"&&(_G===null||_G===void 0?void 0:_G.hst)&&_d.location.host!=="localhost"?_G.hst:"";h=s+"/mysaves/collections/";n.getUrl="get?";n.addUrl="items/add?";n.delUrl="items/delete?";var a="create?",v="suggest",c=typeof _G!="undefined"?_G===null||_G===void 0?void 0:_G.IG:null;n.postRequest=t;n.itemFromSchema=l;n.getCollections=k;n.getSingleCollection=d;n.addNonGenericItem=g;n.deleteNonGenericItem=nt;n.deleteGenericItem=tt;n.createCollection=it;n.getCollectionFromSpecifier=r;n.getSuggestedCollectionTitle=rt})(MySavesAPIUtils||(MySavesAPIUtils={}))