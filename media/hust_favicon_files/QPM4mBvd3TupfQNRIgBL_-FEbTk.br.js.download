var MMDropDown;(function(){function u(t,r,u){u=u||"*";var e=t.getElementsByTagName(u),f=[];return i(e,function(t){n(t,r)&&f.push(t)}),f}function v(n){return s[n]||(s[n]=new RegExp("\\b"+n+"\\b")),s[n]}function n(n,t){var i=n.className||"";return v(t).test(i)}function h(t,i){t.className=t.className||"";n(t,i)||(t.className+=" "+i)}function e(n,t){var i=n.className||"",r=v(t);n&&i&&t&&(n.className=n.className.replace(r,"").replace(/\s+/," "))}function t(n){return sj_sp(n),sj_pd(n),!1}function nt(n){return(n=n||_w.event,n.pageX||n.pageY)?{x:n.pageX,y:n.pageY}:{x:n.clientX+_d.body.scrollLeft-_d.body.clientLeft,y:n.clientY+_d.body.scrollTop-_d.body.clientTop}}function r(n){return n.clientHeight||n.innerHeight}function y(n){return n.offsetY||n.layerY}function i(n,t,i){i=i||this;for(var r=0;r<n.length;r++)t.call(i,n[r],r)}function p(n,t){var i=function(){};i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n}function o(){var n={};this.emit=function(t){if(n[t]){var r=Array.prototype.slice.call(arguments,1);i(n[t],function(n){n.apply(this,r)},this)}};this.addL=function(t,i){n[t]||(n[t]=[]);n[t].push(i)}}function c(n){return n.keyCode||n.charCode||n.which}function w(r,u){function p(){v=null;i(s,function(t){if(n(t,"ftrCP")){var r=t.childNodes;i(r,function(n){e(n,"ftrVS")})}else e(t,"ftrVS")})}function b(n){var i,r;if(n&&(c(n)===a||y)){i=y;switch(c(n)){case d:f.up();break;case g:f.down();break;case k:r=sj_et(n);f.setSelected(r);i=!1;break;case l:v?f.emit("enter",v):i=!1;break;case a:f.hide();break;default:i=!1}i&&t(n)}}function nt(){sj_ue(_d,"keydown",b);sj_evt.unbind("ajax.unload",nt)}function it(n){var t=null,i;if(ut(n))t=s[0],t.tagName!=="A"&&(t=s[1]);else if(t=tt(s,n),t||this.colorSelections&&(t=tt(this.colorSelections,n)),t&&t.tagName!=="A"){if(t.nextSibling&&t.nextSibling.tagName==="A")return t.nextSibling;i=rt();i.length>0&&(this.colorSelections=i,t=i[0])}return t}function rt(){var n=s[s.length-1];return n.getElementsByTagName("A")}function ut(n){var t=n.getAttribute("delid");return t?!0:w(s,n)>=0?!1:this.colorSelections&&w(this.colorSelections,n)>=0?!1:!0}function tt(n,t){var i=w(n,t);return i>=0&&i+1<n.length?n[i+1]:null}function w(n,t){for(var i=0;i<n.length;i++)if(n[i]==t)return i;return-1}o.call(this);var f=this,y=!1,v=null,s=u.childNodes[0].childNodes;s.length!=0&&(sj_be(r,"click",function(n){t(n);y?f.hide():f.show()}),sj_be(r,"keyup",function(n){t(n);c(n)===l&&(y?f.hide():f.show())}),i(s,function(t){sj_be(t,"mouseover",function(){p();n(t,"ftrNR")||n(t,"ftrCP")||f.sel(t)})}),sj_be(_d,"keydown",b),sj_be(u,"focusout",function(){sb_st(function(){y&&!u.contains(_d.activeElement)&&f.hide()},10)}),sj_evt.bind("ajax.unload",nt),this.hide=function(){h(u,"hidden");r.getAttribute("aria-expanded")==="true"&&r.focus();r.setAttribute("aria-expanded","false");y=!1;p();sj_evt.fire("focusDrop",u);this.emit("close",this)},sj_evt.bind("focusChange",function(n){n[1]!=u&&f.hide()}),this.show=function(){sj_evt.fire("focusChange",u);e(u,"hidden");r.setAttribute("aria-expanded","true");y=!0;this.emit("open",this)},this.up=function(){var t=v?v.previousSibling:s[s.length-1];!t&&n(v,"ftrCPS")&&(t=v.parentNode.previousSibling);t&&(n(t,"ftrCP")&&(t=t.childNodes[t.childNodes.length-1]),this.sel(t),this.emit("up",t),t.focus())},this.down=function(){var t=v?v.nextSibling:s[0];t&&(n(t,"ftrCP")&&(t=t.childNodes[0]),this.sel(t),this.emit("down",t),t.focus())},this.setSelected=function(n){v=it(n)},this.sel=function(n){p();v=n;h(n,"ftrVS")})}function b(n){function v(n){return t(n),f-=n.wheelDelta?n.wheelDelta/5:-n.detail*10,s.update(),!1}function p(){h&&(h=!1,s.emit("dragend"))}function w(n){if(h){var t=nt(n).y,r=sj_go(i,"Top");f-=r+a-t;s.update()}}function b(n){return h&&t(n),!1}function k(){sj_ue(_d,"mouseup",p);sj_ue(_d,"mousemove",w);sj_ue(_d,"selectstart",b);sj_evt.unbind("ajax.unload",k)}o.call(this);var s=this,u=n.childNodes[0],e=sj_ce("div"),i=sj_ce("div");e.className="ftrSbR";i.className="ftrSb";e.appendChild(i);n.appendChild(e);var f=0,c=0,l=0,h=!1,a=0;this.update=function(){var n=r(u);c=Math.max(n*n/u.scrollHeight,10);i.style.height=c+"px";u.scrollTop=f;f=u.scrollTop;e.style.height=n-10+"px";l=f/(u.scrollHeight-n)*(r(e)-r(i));i.style.top=l+"px"};this.scrollTo=function(n){f=n;this.update()};this.ctr=function(n){var t=sj_go(n,"Top"),i=sj_go(u,"Top"),e=t-i-f,o=t-i;e<0?f=o:e-r(u)+r(n)>0&&(f=o-r(u)+r(n));this.update()};sj_be(e,"mousedown",function(n){t(n);var f=y(n)/r(e)*u.scrollHeight-r(i);s.scrollTo(f)});sj_be(i,"mousedown",t);sj_be(i,"click",t);sj_be(e,"click",t);sj_be(n,"mousewheel",v,!0);sj_be(n,"DOMMouseScroll",v,!0);sj_be(i,"mousedown",function(n){return t(n),h=!0,a=y(n),s.emit("dragstart"),!1});sj_be(_d,"mouseup",p);sj_be(_d,"mousemove",w);sj_be(_d,"selectstart",b);sj_evt.bind("ajax.unload",k)}function tt(){function c(n){i(l,function(t){n!==t&&t.hide()})}function y(){sb_ie&&s||c();s=!1}function p(){sj_ue(_d,"click",y);sj_evt.unbind("ajax.unload",p)}var r=u(f,"ftrDC","div"),k=u(f,"ftrH_MmVert","span"),l=[],a=[],o=!1,v,s;i(k,function(t,i){var f=new w(t,r[i]),s=n(r[i],"ftrS")?new b(r[i]):null;l.push(f),function(i,r,f){r.addL("open",function(){var n,e;c(r);h(t,"ftrHh");n=u(f,"ftrSe");n.length>0&&(r.sel(n[0]),i&&i.ctr(n[0].parentNode));e=f.childNodes[0];t.offsetWidth>e.offsetWidth&&(e.style.width=t.offsetWidth+"px");o=!0});sj_be(t,"mouseover",function(){o&&r.show()});sj_be(t,"focus",function(){o&&c(r)});r.addL("close",function(){e(t,"ftrHh");o=!1});r.addL("enter",function(t){if((!n(t.parentNode.parentNode,"ftrDC")||!n(t.parentNode.parentNode.previousSibling,"ftrHR"))&&(n(t,"ftrCPS")&&(t=t.childNodes[0]),t&&t.tagName==="A")){var i=!1;t.onmousedown?(i=t.onmousedown(),i&&(_w.location.href=t.href)):t.click()}});i&&(r.addL("open",function(){i.update()}),a.push(i),r.addL("up",function(n){i.ctr(n)}),r.addL("down",function(n){i.ctr(n)}))}(s,f,r[i])});v=u(f,"ftrNR");i(v,function(n){sj_be(n,"click",t)});s=!1;i(a,function(n){n.addL("dragend",function(){s=!0})});sj_be(_d,"click",y);sj_evt.bind("ajax.unload",p)}function it(){var n=u(_d.body,"ftrDC","div"),t=u(f,"ans","div");i(t,function(t,i){t.appendChild(n[i])})}var k=9,l=13,a=27,d=38,g=40,f=_ge("ftrB"),s={};p(w,o);p(b,o);it();tt()})(MMDropDown||(MMDropDown={}))